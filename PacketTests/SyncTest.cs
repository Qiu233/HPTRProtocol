namespace PacketTests;

public class SyncTest
{
	[TestedFor("1.4.3.6")]
	[Fact]
	public void ChangeDoortTest()
	{
		ClientSerializeTest(
			new ChangeDoor
			{
				ChangeType = true,
				Position = new(20, 40),
				Direction = 2
			}
			, new byte[] { 0x09, 0x00, 0x13, 0x01, 0x14, 0x00, 0x28, 0x00, 0x02 }
		);
	}
	[TestedFor("1.4.3.6")]
	[Fact]
	public void InstancedItemTest()
	{
		ClientSerializeTest(
			new InstancedItem
			{
				ItemSlot = 2,
				Position = new(20, 40),
				Velocity = new(20, 40),
				Stack = 20,
				Prefix = 6,
				Owner = 4,
				ItemType = 3063
			}
			, new byte[] {
				0x1B, 0x00, 0x5A, 0x02, 0x00, 0x00, 0x00, 0xA0, 0x41, 0x00, 0x00, 0x20, 0x42,
				0x00, 0x00, 0xA0, 0x41, 0x00, 0x00, 0x20, 0x42, 0x14, 0x00, 0x06, 0x04, 0xF7, 0x0B }
		);
	}
	[TestedFor("1.4.3.6")]
	[Fact]
	public void ItemOwnerTest()
	{
		ClientSerializeTest(
			new ItemOwner
			{
				ItemSlot = 20,
				OtherPlayerSlot = 5
			}
			, new byte[] { 0x06, 0x00, 0x16, 0x14, 0x00, 0x05 }
		);
	}
	[TestedFor("1.4.3.6")]
	[Fact]
	public void KillProjectileTest()
	{
		ClientSerializeTest(
			new KillProjectile
			{
				PlayerSlot = 10,
				ProjSlot = 20
			}
			, new byte[] { 0x06, 0x00, 0x1D, 0x14, 0x00, 0x0A }
		);
	}
	[TestedFor("1.4.3.6")]
	[Fact]
	public void PlayerControlsTest()
	{
		ClientSerializeTest(
			new PlayerControls
			{
				PlayerSlot = 20,
				Bit1 = 2,
				Bit2 = 3,
				Bit3 = 4,
				Bit4 = 5,
				SelectedItem = 20,
				Position = new(20, 40),
				Velocity = new(20, 40),
				PotionOfReturnOriginalUsePosition = new(20, 40),
				PotionOfReturnHomePosition = new(20, 40)
			}
			, new byte[] { 0x11, 0x00, 0x0D, 0x14, 0x02, 0x03, 0x04, 0x05, 0x14, 0x00, 0x00, 0xA0, 0x41, 0x00, 0x00, 0x20, 0x42 }
		);
	}
	[TestedFor("1.4.3.6")]
	[Fact]
	public void PlayerHealthTest()
	{
		ClientSerializeTest(
			new PlayerHealth
			{
				PlayerSlot = 16,
				StatLifeMax = 200,
				StatLife = 20
			}
			, new byte[] { 0x08, 0x00, 0x10, 0x10, 0x14, 0x00, 0xC8, 0x00 }
		);
	}
	[TestedFor("1.4.3.6")]
	[Fact]
	public void PlayerPvPTest()
	{
		ClientSerializeTest(
			new PlayerPvP
			{
				PlayerSlot = 10,
				Pvp = true
			}
			, new byte[] { 0x05, 0x00, 0x1E, 0x0A, 0x01 }
		);
	}
	[TestedFor("1.4.3.6")]
	[Fact]
	public void StrikeNPCTest()
	{
		ClientSerializeTest(
			new StrikeNPC
			{
				NPCSlot = 12,
				Crit = true,
				Damage = 200,
				HitDirection = 3,
				Knockback = 2f
			}
			, new byte[] { 0x0D, 0x00, 0x1C, 0x0C, 0x00, 0xC8, 0x00, 0x00, 0x00, 0x00, 0x40, 0x03, 0x01 }
		);
	}
	[TestedFor("1.4.3.6")]
	[Fact]
	public void SyncChestItemTest()
	{
		ClientSerializeTest(
			new SyncChestItem
			{
				ChestSlot = 10,
				ChestItemSlot = 20,
				ItemType = 3064,
				Prefix = 8,
				Stack = 1,
			}
			, new byte[] { 0x0B, 0x00, 0x20, 0x0A, 0x00, 0x14, 0x01, 0x00, 0x08, 0xF8, 0x0B }
		);
	}
	[TestedFor("1.4.3.6")]
	[Fact]
	public void SyncEquipmentTest()
	{
		ClientSerializeTest(
			new SyncEquipment
			{
				PlayerSlot = 7,
				ItemSlot = 20,
				ItemType = 3062,
				Prefix = 7,
				Stack = 2
			}
			, new byte[] { 0x0B, 0x00, 0x05, 0x07, 0x14, 0x00, 0x02, 0x00, 0x07, 0xF6, 0x0B }
		);
	}
	[TestedFor("1.4.3.6")]
	[Fact]
	public void SyncItemTest()
	{
		ClientSerializeTest(
			new SyncItem
			{
				ItemSlot = 30,
				ItemType = 20,
				Owner = 6,
				Position = new(520, 540),
				Velocity = new(20, 40),
				Prefix = 4,
				Stack = 2,
			}
			, new byte[] {
				0x1B, 0x00, 0x15, 0x1E, 0x00, 0x00, 0x00, 0x02, 0x44,
				0x00, 0x00, 0x07, 0x44, 0x00, 0x00, 0xA0, 0x41, 0x00,
				0x00, 0x20, 0x42, 0x02, 0x00, 0x04, 0x06, 0x14, 0x00 }
		);
	}
	[TestedFor("1.4.3.6")]
	[Fact]
	public void SyncNPCTest()
	{
		ClientSerializeTest(
			new SyncNPC
			{
				NPCSlot = 17,
				NPCType = 60,
				AI1 = 1f,
				AI2 = 2f,
				AI3 = 3f,
				AI4 = 4f,
				Bit1 = 2,
				Bit2 = 3,
				Bit3 = 4,
				HP = 200,
				Target = 20,
				PlayerCount = 10,
				Offset = new(40, 80),
				Velocity = new(80, 40),
				StrengthMultiplier = 2f
			}
			, new byte[] {
				0x21, 0x00, 0x17, 0x11, 0x00, 0x00, 0x00, 0x20, 0x42, 0x00, 0x00,
				0xA0, 0x42, 0x00, 0x00, 0xA0, 0x42, 0x00, 0x00, 0x20, 0x42, 0x14,
				0x00, 0x02, 0x03, 0x3C, 0x00, 0x0A, 0x04, 0xC8, 0x00, 0x00, 0x00 }
		);
	}
	[TestedFor("1.4.3.6")]
	[Fact]
	public void SyncPlayerTest()
	{
		ClientSerializeTest(
			new SyncPlayer
			{
				PlayerSlot = 2,
				SkinVariant = 6,
				Hair = 20,
				Name = "TestPlayerName",
				HairDye = 6,
				Bit1 = 4,
				Bit2 = 6,
				Bit3 = 25,
				Bit4 = 90,
				HideMisc = 20,
				HairColor = new(20, 20, 20),
				SkinColor = new(30, 30, 30),
				EyeColor = new(40, 30, 30),
				ShirtColor = new(50, 30, 30),
				UnderShirtColor = new(60, 30, 30),
				PantsColor = new(70, 30, 30),
				ShoeColor = new(80, 30, 30),
			}
			, new byte[] {
				0x30, 0x00, 0x04, 0x02, 0x06, 0x14, 0x0E, 0x54, 0x65, 0x73, 0x74, 0x50,
				0x6C, 0x61, 0x79, 0x65, 0x72, 0x4E, 0x61, 0x6D, 0x65, 0x06, 0x04, 0x06,
				0x14, 0x14, 0x14, 0x14, 0x1E, 0x1E, 0x1E, 0x28, 0x1E, 0x1E, 0x32, 0x1E,
				0x1E, 0x3C, 0x1E, 0x1E, 0x46, 0x1E, 0x1E, 0x50, 0x1E, 0x1E, 0x19, 0x5A }
		);
	}
	[TestedFor("1.4.3.6")]
	[Fact]
	public void SyncPlayerChestTest() //TODO: need further test on ChestName
	{
		ClientSerializeTest(
			new SyncPlayerChest
			{
				Chest = 20,
				Position = new(80, 120)
			}
			, new byte[] { 0x0A, 0x00, 0x21, 0x14, 0x00, 0x50, 0x00, 0x78, 0x00, 0xFF }
		);
	}
	[TestedFor("1.4.3.6")]
	[Fact]
	public void SyncProjectileTest()
	{
		ClientSerializeTest(
			new SyncProjectile
			{
				ProjSlot = 23,
				Position = new(70, 80),
				Velocity = new(70, 80),
				PlayerSlot = 20,
				ProjType = 50,
				Bit1 = 50,
				AI1 = 2f,
				AI2 = 6f,
				BannerId = 6,
				Damange = 600,
				Knockback = 2f,
				OriginalDamage = 500,
				UUID = 42
			}
			, new byte[] {
				0x23, 0x00, 0x1B, 0x17, 0x00, 0x00, 0x00, 0x8C, 0x42, 0x00, 0x00, 0xA0,
				0x42, 0x00, 0x00, 0x8C, 0x42, 0x00, 0x00, 0xA0, 0x42, 0x14, 0x32, 0x00,
				0x32, 0x00, 0x00, 0xC0, 0x40, 0x58, 0x02, 0x00, 0x00, 0x00, 0x40 }
		);
	}
	[TestedFor("1.4.3.6")]
	[Fact]
	public void TileChangeTest()
	{
		ClientSerializeTest(
			new TileChange
			{
				ChangeType = 2,
				Position = new(60, 90),
				Style = 5,
				TileType = 60
			}
			, new byte[] { 0x0B, 0x00, 0x11, 0x02, 0x3C, 0x00, 0x5A, 0x00, 0x3C, 0x00, 0x05 }
		);
	}
	[TestedFor("1.4.3.6")]
	[Fact]
	public void TileSquareTest()
	{
		ClientSerializeTest(
			new TileSquare
			{
				Data = new SquareData()
				{
					ChangeType = TileChangeType.LavaWater,
					TilePosX = 20,
					TilePosY = 40,
					Width = 60,
					Height = 80,
					Tiles = new SimpleTileData[5, 10],
				}
			}
			, new byte[] { 
				0x6E, 0x00, 0x14, 0x14, 0x00, 0x28, 0x00, 0x3C, 0x50, 0x01, 0x00, 0x00, 0x00, 0x00, 
				0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
				0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
				0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
				0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
				0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
				0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
				0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }
		);
	}
}